<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<section xmlns="http://docbook.org/ns/docbook" version="5.0" xmlns:xlink="http://www.w3.org/1999/xlink" xml:id="__a_p___web_8cpp" xml:lang="en-US">
<title>C:/workspace/Projeto/InteligentDestiller/src/AP_Web.cpp File Reference</title>
<indexterm><primary>C:/workspace/Projeto/InteligentDestiller/src/AP_Web.cpp</primary></indexterm>
<para>

<para>Web Server functions. </para>
 
</para>
<programlisting linenumbering="unnumbered">#include &quot;AP.h&quot;<?linebreak?></programlisting>Include dependency graph for AP_Web.cpp:<para>
    <informalfigure>
        <mediaobject>
            <imageobject>
                <imagedata width="50%" align="center" valign="middle" scalefit="0" fileref="_a_p___web_8cpp__incl.png"></imagedata>
            </imageobject>
        </mediaobject>
    </informalfigure>
</para>
<simplesect>
    <title>Functions    </title>
        <itemizedlist>
            <listitem><para>void <link linkend="__a_p___web_8cpp_1a0be75b75b82f96e18d5c695059a67a63">handleWebSocketMessage</link> (void *arg, uint8_t *data, size_t len)</para>

<para>Definitions. </para>
</listitem>
            <listitem><para>void <link linkend="__a_p___web_8cpp_1ad296f25594d8ca4d02d0025819437b7b">onEvent</link> (AsyncWebSocket *<link linkend="__o_s_8h_1a56916c67f21f332014c1c19b200d45f3">server</link>, AsyncWebSocketClient *client, AwsEventType type, void *arg, uint8_t *data, size_t len)</para>

<para>Web Server and WebSocket Server variables and constants initialization function. </para>
</listitem>
            <listitem><para>void <link linkend="__a_p___web_8cpp_1a553ce9cca044d40931e5cbe9deb407e4">setupRoutes</link> ()</para>

<para>Setup Calls. </para>
</listitem>
        </itemizedlist>
</simplesect>
<section>
<title>Detailed Description</title>

<para>Web Server functions. </para>

<para><formalpara><title>Author</title>

<para>SÃ©rgio Carmo</para>
</formalpara>
<formalpara><title>Version</title>

<para>1.0 </para>
</formalpara>
</para>
</section>
<section>
<title>Function Documentation</title>
<anchor xml:id="__a_p___web_8cpp_1a0be75b75b82f96e18d5c695059a67a63"/><section>
    <title>handleWebSocketMessage()</title>
<indexterm><primary>handleWebSocketMessage</primary><secondary>AP_Web.cpp</secondary></indexterm>
<indexterm><primary>AP_Web.cpp</primary><secondary>handleWebSocketMessage</secondary></indexterm>
<para><computeroutput>void handleWebSocketMessage (void * arg, uint8_t * data, size_t len)</computeroutput></para><para>

<para>Definitions. </para>
</para>

<para>Variables and Constants for Web Server and WebSocket Server</para>

<para>Web Server and WebSocket Server variables</para>

<para>These variables are used to create the Web Server and WebSocket Server.</para>

<para><note><title>Note</title>

<para>These variables are used to create the Web Server and WebSocket Server. </para>

<para>These variables are used to handle the HTTP GET requests for various resources.</para>
</note>

                <formalpara>
                    <title>
Parameters</title>
                    <para>
                    <table frame="all">
                        <tgroup cols="2" align="left" colsep="1" rowsep="1">
                        <colspec colwidth="1*"/>
                        <colspec colwidth="4*"/>
                        <tbody>
                            <row>
<entry>server</entry><entry>
<para>Web Server </para>
</entry>
                            </row>
                            <row>
<entry>ws</entry><entry>
<para>WebSocket Server </para>
</entry>
                            </row>
                            <row>
<entry>processor</entry><entry>
<para>Web Server Processor </para>
</entry>
                            </row>
                            <row>
<entry>wsFrameInfo</entry><entry>
<para>WebSocket Frame Information </para>
</entry>
                            </row>
                            <row>
<entry>wsMask</entry><entry>
<para>WebSocket Mask</para>
</entry>
                            </row>
                        </tbody>
                        </tgroup>
                    </table>
                    </para>
                </formalpara>
                <formalpara><title>Returns</title>

<para>void </para>
</formalpara>
</para>

<para>WebSocket Frame Information Structure Pointer (info)</para>

<para>Check if the WebSocket message is a text message and the final message in the frame sequence and the length of the message is equal to the length of the frame and the index of the frame is 0</para>

<para>Null-terminate the data to make it a string (char array)</para>

<para>Convert the data to a String object</para>

<para>Print the received WebSocket message</para>
Here is the caller graph for this function:<para>
    <informalfigure>
        <mediaobject>
            <imageobject>
                <imagedata width="50%" align="center" valign="middle" scalefit="0" fileref="_a_p___web_8cpp_a0be75b75b82f96e18d5c695059a67a63_icgraph.png"></imagedata>
            </imageobject>
        </mediaobject>
    </informalfigure>
</para>
</section>
<anchor xml:id="__a_p___web_8cpp_1ad296f25594d8ca4d02d0025819437b7b"/><section>
    <title>onEvent()</title>
<indexterm><primary>onEvent</primary><secondary>AP_Web.cpp</secondary></indexterm>
<indexterm><primary>AP_Web.cpp</primary><secondary>onEvent</secondary></indexterm>
<para><computeroutput>void onEvent (AsyncWebSocket * server, AsyncWebSocketClient * client, AwsEventType type, void * arg, uint8_t * data, size_t len)</computeroutput></para><para>

<para>Web Server and WebSocket Server variables and constants initialization function. </para>
</para>

<para>This function initializes the Web Server and WebSocket Server variables and constants.</para>

<para><note><title>Note</title>

<para>This function initializes the Web Server and WebSocket Server variables and constants.</para>
</note>

                <formalpara>
                    <title>
Parameters</title>
                    <para>
                    <table frame="all">
                        <tgroup cols="2" align="left" colsep="1" rowsep="1">
                        <colspec colwidth="1*"/>
                        <colspec colwidth="4*"/>
                        <tbody>
                            <row>
<entry>server</entry><entry>
<para></para>
</entry>
                            </row>
                            <row>
<entry>client</entry><entry>
<para></para>
</entry>
                            </row>
                            <row>
<entry>type</entry><entry>
<para></para>
</entry>
                            </row>
                            <row>
<entry>arg</entry><entry>
<para></para>
</entry>
                            </row>
                            <row>
<entry>data</entry><entry>
<para></para>
</entry>
                            </row>
                            <row>
<entry>len</entry><entry>
<para></para>
</entry>
                            </row>
                        </tbody>
                        </tgroup>
                    </table>
                    </para>
                </formalpara>
                </para>

<para>Handle WebSocket events based on the event type (type)</para>

<para>WebSocket client connected event</para>

<para>Print the IP address of the connected WebSocket client</para>

<para>WebSocket client disconnected event</para>

<para>Print the IP address of the disconnected WebSocket client</para>

<para>WebSocket data event</para>

<para>Handle the WebSocket message data event</para>

<para>WebSocket Pong event (response to a Ping)</para>

<para>WebSocket error event</para>
Here is the call graph for this function:<para>
    <informalfigure>
        <mediaobject>
            <imageobject>
                <imagedata width="50%" align="center" valign="middle" scalefit="0" fileref="_a_p___web_8cpp_ad296f25594d8ca4d02d0025819437b7b_cgraph.png"></imagedata>
            </imageobject>
        </mediaobject>
    </informalfigure>
</para>
Here is the caller graph for this function:<para>
    <informalfigure>
        <mediaobject>
            <imageobject>
                <imagedata width="50%" align="center" valign="middle" scalefit="0" fileref="_a_p___web_8cpp_ad296f25594d8ca4d02d0025819437b7b_icgraph.png"></imagedata>
            </imageobject>
        </mediaobject>
    </informalfigure>
</para>
</section>
<anchor xml:id="__a_p___web_8cpp_1a553ce9cca044d40931e5cbe9deb407e4"/><section>
    <title>setupRoutes()</title>
<indexterm><primary>setupRoutes</primary><secondary>AP_Web.cpp</secondary></indexterm>
<indexterm><primary>AP_Web.cpp</primary><secondary>setupRoutes</secondary></indexterm>
<para><computeroutput>void setupRoutes ( )</computeroutput></para><para>

<para>Setup Calls. </para>
</para>

<para>Setup the routes for the web server.</para>

<para>This function defines the routes for handling HTTP GET requests for various resources such as HTML pages, CSS files, JS files, images, time adjustments, timer control, toggle actions, state actions, WiFi handlers, and timer handlers. </para>

<para>Set the WebSocket event handler function for the WebSocket Server (ws)</para>

<para>Add the WebSocket handler to the server (server) ///////////////////////////////////////////////////////////////////////////////////// Route for root / and index_webButtons.html</para>

<para>Send the index.html file to the client when the root / is requested</para>

<para>Send the index.html file to the client when the root / is requested</para>

<para>Route for CSS files</para>

<para>Send the style.css file to the client when requested</para>

<para>Send the style.css file to the client when requested</para>

<para>Send the style.css file to the client when requested</para>

<para>Route JS files</para>

<para>Send the script_actions.js file to the client when requested</para>

<para>Send the script_get_Data.js file to the client when requested</para>

<para>Send the script_timers.js file to the client when requested</para>

<para>Send the script_timers_Img.js file to the client when requested</para>

<para>Send the script_timers_2.js file to the client when requested</para>

<para>Route for image files</para>

<para>Send the icon.png file to the client when requested</para>

<para>Send the estg_logo.png file to the client when requested</para>

<para>Send the bg.png file to the client when requested</para>

<para>Send the destiller.png file to the client when requested</para>

<para>Send the BMB_ON.png file to the client when requested</para>

<para>Send the BMB_OFF.png file to the client when requested</para>

<para>Send the RAQ_ON.png file to the client when requested</para>

<para>Send the RAQ_OFF.png file to the client when requested</para>

<para>Send the Valve_ON.png file to the client when requested</para>

<para>Send the Valve_OFF.png file to the client when requested</para>

<para>Send the Auto_ON.png file to the client when requested</para>

<para>Send the Auto_OFF.png file to the client when requested</para>

<para>Send the Man_ON.png file to the client when requested</para>

<para>Send the Man_OFF.png file to the client when requested</para>

<para>Send the sMin.png file to the client when requested</para>

<para>Send the sMax.png file to the client when requested</para>

<para>Send the sAlarm.png file to the client when requested</para>

<para>Send the button_ON.png file to the client when requested</para>

<para>Send the button_OFF.png file to the client when requested</para>

<para>Routes for handling time adjustments</para>

<para>Send the response to the client when the /add1s route is requested</para>

<para>Send the response to the client when the /add5s route is requested</para>

<para>Send the response to the client when the /add10s route is requested</para>

<para>Send the response to the client when the /add1m route is requested</para>

<para>Send the response to the client when the /add5m route is requested</para>

<para>Send the response to the client when the /add10m route is requested</para>

<para>Send the response to the client when the /rem1s route is requested</para>

<para>Send the response to the client when the /rem5s route is requested</para>

<para>Send the response to the client when the /rem10s route is requested</para>

<para>Send the response to the client when the /rem1m route is requested</para>

<para>Send the response to the client when the /rem5m route is requested</para>

<para>Send the response to the client when the /rem10m route is requested</para>

<para>Routes for handling timer control</para>

<para>Send the response to the client when the /startTimer route is requested</para>

<para>Send the response to the client when the /stopTimer route is requested</para>

<para>Send the response to the client when the /resetTimer route is requested</para>

<para>Routes for handling toggle actions</para>

<para>Send the response to the client when the /toggleAutoMode route is requested</para>

<para>Send the response to the client when the /togglePump route is requested</para>

<para>Send the response to the client when the /toggleWaterOut route is requested</para>

<para>Send the response to the client when the /toggleWaterIn route is requested</para>

<para>Send the response to the client when the /toggleResistor route is requested</para>

<para>Routes for handling read actions</para>

<para>Send the response to the client when the /readAutoMode route is requested</para>

<para>Send the response to the client when the /readManualMode route is requested</para>

<para>Send the response to the client when the /readPump route is requested</para>

<para>Send the response to the client when the /readWaterOut route is requested</para>

<para>Send the response to the client when the /readResistor route is requested</para>

<para>Send the response to the client when the /readWaterIn route is requested</para>

<para>Send the response to the client when the /readWaterMax route is requested</para>

<para>Send the response to the client when the /readWaterMin route is requested</para>

<para>Send the response to the client when the /readWaterAlarm route is requested</para>

<para>Route for WiFi Handlers</para>

<para>Send the response to the client when the /readWifiQuality route is requested</para>

<para>Send the response to the client when the /readWifiSSID route is requested</para>

<para>Send the response to the client when the /readWifiTX route is requested</para>

<para>Send the response to the client when the /readWifiIP route is requested</para>

<para>Route for Timer Handlers</para>

<para>Send the response to the client when the /readTimer route is requested</para>

<para>Send the response to the client when the /readHour route is requested</para>

<para>Send the response to the client when the /readMinute route is requested</para>

<para>Send the response to the client when the /readSecound route is requested</para>

<para>Start Server</para>

<para>Start the server</para>
Here is the call graph for this function:<para>
    <informalfigure>
        <mediaobject>
            <imageobject>
                <imagedata width="50%" align="center" valign="middle" scalefit="0" fileref="_a_p___web_8cpp_a553ce9cca044d40931e5cbe9deb407e4_cgraph.png"></imagedata>
            </imageobject>
        </mediaobject>
    </informalfigure>
</para>
Here is the caller graph for this function:<para>
    <informalfigure>
        <mediaobject>
            <imageobject>
                <imagedata width="50%" align="center" valign="middle" scalefit="0" fileref="_a_p___web_8cpp_a553ce9cca044d40931e5cbe9deb407e4_icgraph.png"></imagedata>
            </imageobject>
        </mediaobject>
    </informalfigure>
</para>
</section>
</section>
</section>
